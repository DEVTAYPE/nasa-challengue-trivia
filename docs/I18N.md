# ğŸŒ Sistema de InternacionalizaciÃ³n (i18n)

## ğŸ“‹ DescripciÃ³n

Sistema completo de internacionalizaciÃ³n para la aplicaciÃ³n, soportando **InglÃ©s** (por defecto) y **EspaÃ±ol**.

## ğŸš€ CaracterÃ­sticas

- âœ… **Cambio de idioma en tiempo real** sin recargar la pÃ¡gina
- âœ… **Persistencia en LocalStorage** - recuerda la preferencia del usuario
- âœ… **BotÃ³n flotante** elegante para cambiar idiomas
- âœ… **Traducciones centralizadas** en archivo Ãºnico fÃ¡cil de modificar
- âœ… **TypeScript completo** con autocompletado de traducciones
- âœ… **Context API** para acceso global al idioma

## ğŸ“‚ Estructura de Archivos

```
lib/i18n/
â”œâ”€â”€ translations.ts          # Todas las traducciones (EN/ES)
â”œâ”€â”€ language-context.tsx     # Context Provider + Hook
â””â”€â”€ index.ts                 # Exports

components/
â””â”€â”€ language-switcher.tsx    # BotÃ³n flotante de cambio de idioma
```

## ğŸ¯ Uso BÃ¡sico

### 1. **En cualquier componente cliente**

```tsx
"use client";

import { useLanguage } from "@/lib/i18n/language-context";

export const MyComponent = () => {
  const { t, language, setLanguage } = useLanguage();

  return (
    <div>
      <h1>{t.hero.title}</h1>
      <p>{t.hero.subtitle}</p>

      {/* Cambiar idioma programÃ¡ticamente */}
      <button onClick={() => setLanguage("es")}>EspaÃ±ol</button>
      <button onClick={() => setLanguage("en")}>English</button>
    </div>
  );
};
```

### 2. **El botÃ³n flotante se incluye automÃ¡ticamente**

Ya estÃ¡ agregado en `layout.tsx`, aparece en todas las pÃ¡ginas:

```tsx
<LanguageProvider>
  <GameProvider>{children}</GameProvider>
  <LanguageSwitcher /> {/* BotÃ³n flotante */}
  <Toaster />
</LanguageProvider>
```

## âœï¸ Agregar Nuevas Traducciones

### Paso 1: Definir la interfaz

Edita `lib/i18n/translations.ts`:

```typescript
export interface Translations {
  // ... traducciones existentes ...

  // Nueva secciÃ³n
  myNewSection: {
    title: string;
    description: string;
    items: string[];
  };
}
```

### Paso 2: Agregar textos en ambos idiomas

```typescript
export const translations: Record<Language, Translations> = {
  en: {
    // ... traducciones existentes ...

    myNewSection: {
      title: "My New Section",
      description: "This is a description",
      items: ["Item 1", "Item 2", "Item 3"],
    },
  },

  es: {
    // ... traducciones existentes ...

    myNewSection: {
      title: "Mi Nueva SecciÃ³n",
      description: "Esta es una descripciÃ³n",
      items: ["Elemento 1", "Elemento 2", "Elemento 3"],
    },
  },
};
```

### Paso 3: Usar en componentes

```tsx
const { t } = useLanguage();

<h2>{t.myNewSection.title}</h2>
<p>{t.myNewSection.description}</p>
<ul>
  {t.myNewSection.items.map((item, i) => (
    <li key={i}>{item}</li>
  ))}
</ul>
```

## ğŸ¨ BotÃ³n de Cambio de Idioma

### CaracterÃ­sticas del LanguageSwitcher

- ğŸ¯ **PosiciÃ³n fija**: Esquina inferior derecha
- ğŸ¨ **Gradiente verde**: Matching con el tema
- ğŸ‡ºğŸ‡¸/ğŸ‡µğŸ‡ª **Banderas**: Indicador visual del idioma actual
- ğŸ’« **Animaciones**: Hover effects y pulse
- ğŸ“± **Responsive**: Funciona en mÃ³viles y desktop
- ğŸ”” **Tooltip**: Muestra hint al hacer hover

### Personalizar el botÃ³n

Edita `components/language-switcher.tsx`:

```tsx
// Cambiar posiciÃ³n
className = "fixed bottom-6 right-6 z-50"; // Default
className = "fixed top-6 right-6 z-50"; // Top right
className = "fixed bottom-6 left-6 z-50"; // Bottom left

// Cambiar colores
className = "bg-gradient-to-r from-green-600 to-emerald-600"; // Default
className = "bg-gradient-to-r from-blue-600 to-cyan-600"; // Blue theme

// Cambiar tamaÃ±o
className = "p-4"; // Default
className = "p-6"; // Larger
```

## ğŸ“Š Secciones Traducidas

### Hero Section

- Badge de temporada
- TÃ­tulo principal
- SubtÃ­tulo
- Call-to-action button

### About Section

- TÃ­tulo y subtÃ­tulo de secciÃ³n
- 4 tarjetas informativas (Game, Levels, Map, Mission)
- 4 feature badges
- Botones de acciÃ³n

### History Section

- TÃ­tulo y subtÃ­tulo
- IntroducciÃ³n
- Ancient Roots (Wari culture)
- Modern Agriculture
- Inspiration text
- Quote inspiracional

## ğŸ”§ API del Hook `useLanguage()`

```typescript
const {
  language, // "en" | "es" - Idioma actual
  setLanguage, // (lang: Language) => void - Cambiar idioma
  t, // Translations - Objeto con todas las traducciones
} = useLanguage();
```

### Ejemplos de uso

```tsx
// Obtener idioma actual
console.log(language); // "en" or "es"

// Cambiar idioma
setLanguage("es");
setLanguage("en");

// Acceder a traducciones
t.hero.title;
t.about.gameTitle;
t.history.ancientText;
t.common.learnMore;
```

## ğŸ’¾ LocalStorage

El idioma se guarda automÃ¡ticamente:

```javascript
// Key
"app-language";

// Values
"en"; // English (default)
"es"; // EspaÃ±ol
```

Para resetear:

```javascript
localStorage.removeItem("app-language");
// O en DevTools Console:
delete localStorage["app-language"];
```

## ğŸŒ Idiomas Disponibles

| CÃ³digo | Idioma  | Bandera | Por defecto |
| ------ | ------- | ------- | ----------- |
| `en`   | English | ğŸ‡ºğŸ‡¸      | âœ…          |
| `es`   | EspaÃ±ol | ğŸ‡µğŸ‡ª      | âŒ          |

## â• Agregar Nuevos Idiomas

### Paso 1: Actualizar el tipo Language

```typescript
export type Language = "en" | "es" | "pt" | "fr"; // Agregar nuevos
```

### Paso 2: Agregar traducciones

```typescript
export const translations: Record<Language, Translations> = {
  en: {
    /* ... */
  },
  es: {
    /* ... */
  },
  pt: {
    /* Traducciones en portuguÃ©s */
  },
  fr: {
    /* Traducciones en francÃ©s */
  },
};
```

### Paso 3: Actualizar el switcher (opcional)

```tsx
// Agregar mÃ¡s opciones al botÃ³n
<button onClick={() => setLanguage("pt")}>ğŸ‡§ğŸ‡· PT</button>
<button onClick={() => setLanguage("fr")}>ğŸ‡«ğŸ‡· FR</button>
```

## ğŸ¯ Mejores PrÃ¡cticas

### âœ… DO - Hacer

```tsx
// âœ… Usar el hook en componentes cliente
"use client";
import { useLanguage } from "@/lib/i18n";

// âœ… Acceder a traducciones a travÃ©s de t
const { t } = useLanguage();
<h1>{t.hero.title}</h1>

// âœ… Mantener traducciones en el archivo translations.ts
// FÃ¡cil de encontrar y modificar

// âœ… Usar TypeScript para autocompletado
t.hero. // <- Autocompletado disponible!
```

### âŒ DON'T - Evitar

```tsx
// âŒ No hardcodear textos en componentes
<h1>Welcome to our site</h1> // Mal
<h1>{t.hero.title}</h1>      // Bien

// âŒ No usar el hook en Server Components
// Solo en "use client" components

// âŒ No duplicar traducciones
// Reusar strings comunes (t.common.*)
```

## ğŸ› SoluciÃ³n de Problemas

### El idioma no persiste al recargar

```tsx
// Verificar que el LanguageProvider estÃ© en el layout
<LanguageProvider>{children}</LanguageProvider>
```

### Error: "useLanguage must be used within a LanguageProvider"

```tsx
// AsegÃºrate de que el componente estÃ© dentro del provider
// en layout.tsx
```

### El botÃ³n no aparece

```tsx
// Verifica que estÃ© en layout.tsx
<LanguageSwitcher />;

// Y que el z-index sea alto
className = "z-50";
```

## ğŸ“± Responsive

El botÃ³n flotante es completamente responsive:

```css
/* Mobile */
@media (max-width: 768px) {
  /* Se mantiene visible pero mÃ¡s pequeÃ±o */
  bottom: 1rem;
  right: 1rem;
}

/* Desktop */
@media (min-width: 769px) {
  bottom: 1.5rem;
  right: 1.5rem;
}
```

## ğŸ¨ PersonalizaciÃ³n

### Cambiar idioma por defecto

```typescript
// En language-context.tsx
const [language, setLanguageState] = useState<Language>("es"); // Cambiar a "es"
```

### Agregar mÃ¡s variantes de espaÃ±ol

```typescript
export type Language = "en" | "es-PE" | "es-ES" | "es-MX";
```

---

## ğŸ“š Recursos

- [Next.js Internationalization](https://nextjs.org/docs/app/building-your-application/routing/internationalization)
- [React Context API](https://react.dev/reference/react/createContext)
- [LocalStorage API](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage)

---

**Ãšltima actualizaciÃ³n:** Octubre 2025  
**Idiomas soportados:** English (EN), EspaÃ±ol (ES)  
**Total de strings traducidos:** 50+
