# 🌍 Sistema de Internacionalización (i18n)

## 📋 Descripción

Sistema completo de internacionalización para la aplicación, soportando **Inglés** (por defecto) y **Español**.

## 🚀 Características

- ✅ **Cambio de idioma en tiempo real** sin recargar la página
- ✅ **Persistencia en LocalStorage** - recuerda la preferencia del usuario
- ✅ **Botón flotante** elegante para cambiar idiomas
- ✅ **Traducciones centralizadas** en archivo único fácil de modificar
- ✅ **TypeScript completo** con autocompletado de traducciones
- ✅ **Context API** para acceso global al idioma

## 📂 Estructura de Archivos

```
lib/i18n/
├── translations.ts          # Todas las traducciones (EN/ES)
├── language-context.tsx     # Context Provider + Hook
└── index.ts                 # Exports

components/
└── language-switcher.tsx    # Botón flotante de cambio de idioma
```

## 🎯 Uso Básico

### 1. **En cualquier componente cliente**

```tsx
"use client";

import { useLanguage } from "@/lib/i18n/language-context";

export const MyComponent = () => {
  const { t, language, setLanguage } = useLanguage();

  return (
    <div>
      <h1>{t.hero.title}</h1>
      <p>{t.hero.subtitle}</p>

      {/* Cambiar idioma programáticamente */}
      <button onClick={() => setLanguage("es")}>Español</button>
      <button onClick={() => setLanguage("en")}>English</button>
    </div>
  );
};
```

### 2. **El botón flotante se incluye automáticamente**

Ya está agregado en `layout.tsx`, aparece en todas las páginas:

```tsx
<LanguageProvider>
  <GameProvider>{children}</GameProvider>
  <LanguageSwitcher /> {/* Botón flotante */}
  <Toaster />
</LanguageProvider>
```

## ✏️ Agregar Nuevas Traducciones

### Paso 1: Definir la interfaz

Edita `lib/i18n/translations.ts`:

```typescript
export interface Translations {
  // ... traducciones existentes ...

  // Nueva sección
  myNewSection: {
    title: string;
    description: string;
    items: string[];
  };
}
```

### Paso 2: Agregar textos en ambos idiomas

```typescript
export const translations: Record<Language, Translations> = {
  en: {
    // ... traducciones existentes ...

    myNewSection: {
      title: "My New Section",
      description: "This is a description",
      items: ["Item 1", "Item 2", "Item 3"],
    },
  },

  es: {
    // ... traducciones existentes ...

    myNewSection: {
      title: "Mi Nueva Sección",
      description: "Esta es una descripción",
      items: ["Elemento 1", "Elemento 2", "Elemento 3"],
    },
  },
};
```

### Paso 3: Usar en componentes

```tsx
const { t } = useLanguage();

<h2>{t.myNewSection.title}</h2>
<p>{t.myNewSection.description}</p>
<ul>
  {t.myNewSection.items.map((item, i) => (
    <li key={i}>{item}</li>
  ))}
</ul>
```

## 🎨 Botón de Cambio de Idioma

### Características del LanguageSwitcher

- 🎯 **Posición fija**: Esquina inferior derecha
- 🎨 **Gradiente verde**: Matching con el tema
- 🇺🇸/🇵🇪 **Banderas**: Indicador visual del idioma actual
- 💫 **Animaciones**: Hover effects y pulse
- 📱 **Responsive**: Funciona en móviles y desktop
- 🔔 **Tooltip**: Muestra hint al hacer hover

### Personalizar el botón

Edita `components/language-switcher.tsx`:

```tsx
// Cambiar posición
className = "fixed bottom-6 right-6 z-50"; // Default
className = "fixed top-6 right-6 z-50"; // Top right
className = "fixed bottom-6 left-6 z-50"; // Bottom left

// Cambiar colores
className = "bg-gradient-to-r from-green-600 to-emerald-600"; // Default
className = "bg-gradient-to-r from-blue-600 to-cyan-600"; // Blue theme

// Cambiar tamaño
className = "p-4"; // Default
className = "p-6"; // Larger
```

## 📊 Secciones Traducidas

### Hero Section

- Badge de temporada
- Título principal
- Subtítulo
- Call-to-action button

### About Section

- Título y subtítulo de sección
- 4 tarjetas informativas (Game, Levels, Map, Mission)
- 4 feature badges
- Botones de acción

### History Section

- Título y subtítulo
- Introducción
- Ancient Roots (Wari culture)
- Modern Agriculture
- Inspiration text
- Quote inspiracional

## 🔧 API del Hook `useLanguage()`

```typescript
const {
  language, // "en" | "es" - Idioma actual
  setLanguage, // (lang: Language) => void - Cambiar idioma
  t, // Translations - Objeto con todas las traducciones
} = useLanguage();
```

### Ejemplos de uso

```tsx
// Obtener idioma actual
console.log(language); // "en" or "es"

// Cambiar idioma
setLanguage("es");
setLanguage("en");

// Acceder a traducciones
t.hero.title;
t.about.gameTitle;
t.history.ancientText;
t.common.learnMore;
```

## 💾 LocalStorage

El idioma se guarda automáticamente:

```javascript
// Key
"app-language";

// Values
"en"; // English (default)
"es"; // Español
```

Para resetear:

```javascript
localStorage.removeItem("app-language");
// O en DevTools Console:
delete localStorage["app-language"];
```

## 🌐 Idiomas Disponibles

| Código | Idioma  | Bandera | Por defecto |
| ------ | ------- | ------- | ----------- |
| `en`   | English | 🇺🇸      | ✅          |
| `es`   | Español | 🇵🇪      | ❌          |

## ➕ Agregar Nuevos Idiomas

### Paso 1: Actualizar el tipo Language

```typescript
export type Language = "en" | "es" | "pt" | "fr"; // Agregar nuevos
```

### Paso 2: Agregar traducciones

```typescript
export const translations: Record<Language, Translations> = {
  en: {
    /* ... */
  },
  es: {
    /* ... */
  },
  pt: {
    /* Traducciones en portugués */
  },
  fr: {
    /* Traducciones en francés */
  },
};
```

### Paso 3: Actualizar el switcher (opcional)

```tsx
// Agregar más opciones al botón
<button onClick={() => setLanguage("pt")}>🇧🇷 PT</button>
<button onClick={() => setLanguage("fr")}>🇫🇷 FR</button>
```

## 🎯 Mejores Prácticas

### ✅ DO - Hacer

```tsx
// ✅ Usar el hook en componentes cliente
"use client";
import { useLanguage } from "@/lib/i18n";

// ✅ Acceder a traducciones a través de t
const { t } = useLanguage();
<h1>{t.hero.title}</h1>

// ✅ Mantener traducciones en el archivo translations.ts
// Fácil de encontrar y modificar

// ✅ Usar TypeScript para autocompletado
t.hero. // <- Autocompletado disponible!
```

### ❌ DON'T - Evitar

```tsx
// ❌ No hardcodear textos en componentes
<h1>Welcome to our site</h1> // Mal
<h1>{t.hero.title}</h1>      // Bien

// ❌ No usar el hook en Server Components
// Solo en "use client" components

// ❌ No duplicar traducciones
// Reusar strings comunes (t.common.*)
```

## 🐛 Solución de Problemas

### El idioma no persiste al recargar

```tsx
// Verificar que el LanguageProvider esté en el layout
<LanguageProvider>{children}</LanguageProvider>
```

### Error: "useLanguage must be used within a LanguageProvider"

```tsx
// Asegúrate de que el componente esté dentro del provider
// en layout.tsx
```

### El botón no aparece

```tsx
// Verifica que esté en layout.tsx
<LanguageSwitcher />;

// Y que el z-index sea alto
className = "z-50";
```

## 📱 Responsive

El botón flotante es completamente responsive:

```css
/* Mobile */
@media (max-width: 768px) {
  /* Se mantiene visible pero más pequeño */
  bottom: 1rem;
  right: 1rem;
}

/* Desktop */
@media (min-width: 769px) {
  bottom: 1.5rem;
  right: 1.5rem;
}
```

## 🎨 Personalización

### Cambiar idioma por defecto

```typescript
// En language-context.tsx
const [language, setLanguageState] = useState<Language>("es"); // Cambiar a "es"
```

### Agregar más variantes de español

```typescript
export type Language = "en" | "es-PE" | "es-ES" | "es-MX";
```

---

## 📚 Recursos

- [Next.js Internationalization](https://nextjs.org/docs/app/building-your-application/routing/internationalization)
- [React Context API](https://react.dev/reference/react/createContext)
- [LocalStorage API](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage)

---

**Última actualización:** Octubre 2025  
**Idiomas soportados:** English (EN), Español (ES)  
**Total de strings traducidos:** 50+
